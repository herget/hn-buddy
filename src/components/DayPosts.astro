---
import { format } from 'date-fns';
import HNPost from './HNPost.astro';

interface Comment {
  author: string;
  comment_text: string;
  created_at: string;
  objectID: string;
  points: number;
  story_id: string;
}

interface Post {
  title: string;
  url: string;
  author: string;
  points: number;
  created_at: string;
  objectID: string;
  num_comments: number;
}

interface PostWithComments {
  post: Post;
  topComments: Comment[];
}

interface Props {
  dayStartISOString: string;
  posts: PostWithComments[];
}

const { dayStartISOString, posts } = Astro.props;
const date = new Date(dayStartISOString);
const formattedDate = format(date, 'MMMM d, yyyy');
---

<div class="day-container">
  <h2 class="day-header">{formattedDate}</h2>
  
  {posts.length > 0 ? (
    <div class="posts-container">
      {posts.map(({ post, topComments }) => (
        <HNPost post={post} topComments={topComments} />
      ))}
    </div>
  ) : (
    <div class="no-posts">No posts found for this day</div>
  )}
</div>

<style>
  .day-container {
    margin-bottom: 3rem;
  }
  
  .day-header {
    border-bottom: 2px solid #f60;
    padding-bottom: 0.5rem;
    margin-bottom: 1.5rem;
    color: #333;
  }
  
  .posts-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  
  .no-posts {
    padding: 1rem;
    background-color: #f5f5f5;
    border-radius: 4px;
    text-align: center;
    color: #666;
  }
</style>
